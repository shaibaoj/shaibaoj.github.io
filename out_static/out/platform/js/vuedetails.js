var vmminxdetails={data:{oCommon:{id:URLPrefix.item_id,comloginState:!1,tianmao:"https://detail.tmall.com/item.htm",adminPidlink:"/user/info/pid",adminLoginlink:"/public/login"},oItemData:{itemInfo:{},picIndex:1,sellerId:"",itemId:"",taobaoImage:[],strItempicArr:[],videoImg:"",videoLink:"",imgArr:[],videoHide:!0,strShorttitle:"",strDesc:"",swiperIndex:0,friendsIndex:0,wholeShow:!1,material_id:0,material_info:[]},sellerInfo:"",oRecommend:"",taobaoComment:{taobaoDataArr:[],taobaoPage:1,taobaoCount:"",taobaoCountSign:0,loadmsg:!0,taobaoLabel:[]},oHistory:{IndexShow:0,descRecommend:"",shorttitleRecommend:"",shorttitleShow:!1,descRecommend:"",descRecommendShow:!1},oSetTemplate:{contentTaoword:"",contentlink:"",showTaowordShare:"",showLinkShare:"",copy_taoword_share:"",copy_link_share:"",defaultShare:"",defaultlink:"",changechain:{Token:"{淘口令}",link:"{二合一}"},comwxqqnav:[{number:0,name:"修改推广文案",bool:!0},{number:1,name:"修改淘口令文案",bool:!1},{number:2,name:"修改短链接文案",bool:!1}],wxqqIndex:0,listArrWx:[{name:"短标题"},{name:"原价"},{name:"券后价"},{name:"介绍"},{name:"淘口令"}],listArrQq:[{name:"短标题"},{name:"原价"},{name:"券后价"},{name:"介绍"},{name:"二合一"}]},oSetting:{pidArr:"",defaultWeChatPid:"",defaultQqPid:"",RelationidWeChat:"",RelationidQq:"",RelationidOther:"",OtherPid:"",setShow:!1,setQQShow:!1,allPidNull:!1},oVideo:{playBool:!1,videooIndex:-1,pLink:" 0",oVoice:!0,videoData:[],oTime:0,videoitemId:"",IndexSave:"",loadIcon:!1,videosetClear:"",videooneIcon:!1}},filters:{scoreFun:function(score){switch(score){case-1:return"hdk-top top-right-down";case 0:return"hdk-line";case 1:return"hdk-top"}},approveFun:function(name){switch(name){case"1":return"待认证";case"2":return"已认证";case"3":return"未验证"}},moneyConversion:function(number){if(number){if(number.length<=4)return number;if(5<=number.length)return Math.round(number/1e4*100)/100}},pidFilter:function(name){var newStr;if(name)if(2===name.length)newStr=name.substr(0,1)+"*";else if(2<name.length){for(var char="",i=0,len=name.length-2;i<len;i++)char+="*";newStr=char.substr(0,4)+name.substr(-8,4)}else newStr=name;return newStr},pidData:function(item){switch(item.type){case"0":return item.pid+"（微信）";case"1":return item.pid+"（QQ）";default:return item.pid+"（其它）"}}},created:function(){},mounted:function(){},watch:{},methods:{adderImg:function(event){var copy=$(event.target).attr("datatips");layer.tips(copy,$(event.target),{skin:"popup-layer",time:0,tips:[2,"#ccc"]})},adderImg1:function(event){var copy=$(event.target).attr("datatips");layer.tips(copy,$(event.target),{skin:"popup-layer content-top-lookimg",time:0,tips:[1,"#fff"]})},copyBtn:function(clickClass,copyClass){console.log("clickClass::::"+clickClass+"[copyClass:::+"+copyClass+"]");var clipboard=new ClipboardJS(clickClass,{target:function(){return document.querySelector(copyClass)}});clipboard.on("success",function(e){layer.msg("复制成功！",{shade:.4,time:1500,shadeClose:!0}),e.clearSelection(),clipboard.destroy()}),clipboard.on("error",function(e){layer.msg("由于您的浏览器不兼容或当前网速较慢，复制失败，请手动复制或更换主流浏览器！",{icon:2})})},seeVideo:function(url){var video='<video class="comvideo" preload="auto" webkit-playsinline="true" playsinline="true" controls autoplay><source src='+url+' type="video/mp4"><source src='+url+' type="video/ogg"><source src='+url+' type="video/webm"></video>';layer.open({type:1,title:"视频",shadeClose:!0,shade:.4,area:["560px",""],content:video})},seetcomment:function(){0<this.taobaoComment.taobaoCount?(this.ajaxRatelabel(),this.taobaoscroll()):layer.msg("没有评论哦",{shadeClose:!0,shade:.4})},ajaxComment:function(callback){var self=this;vmAjaxPost("/api/common/goods/get_ratelist",{num_iid:self.oItemData.itemId,pageno:self.taobaoComment.taobaoPage,pagesize:10},function(data){layer.closeAll("loading"),"1"==data.data.content.status&&(self.taobaoComment.taobaoDataArr=self.taobaoComment.taobaoDataArr.concat(data.data.content.data),self.taobaoComment.taobaoCountSign=data.data.content.count,self.taobaoComment.taobaoPage<=parseInt(self.taobaoComment.taobaoCountSign/10)?(self.taobaoComment.taobaoPage+=1,self.taobaoComment.loadmsg=!0):self.taobaoComment.loadmsg=!1,self.$nextTick(function(){callback&&(self.taobaoComment.taobaoCount=data.data.content.count)}))})},taobaoscroll:function(){var self=this,nScrollHight=0,nScrollTop=0,nDivHight=$(".popup-taobao-comment").height();$(".popup-taobao-comment").scroll(function(){nScrollHight=$(this)[0].scrollHeight,nScrollTop=$(this)[0].scrollTop,parseInt(nScrollTop+nDivHight)+10>=nScrollHight&&self.taobaoComment.loadmsg&&(self.taobaoComment.loadmsg=!1,self.ajaxComment())})},ajaxRatelabel:function(){var self=this,link="https://rate.tmall.com/listTagClouds.htm?itemId="+self.oItemData.itemId+"&isAll=true&isInner=true&t=1570446988539&groupId=&_ksTS=1570446988540_680";layer.load(2,{shade:.1}),vmAjaxGetJsonp(link,{},function(data){layer.closeAll("loading"),data.tags.tagClouds&&(self.taobaoComment.taobaoLabel=data.tags.tagClouds),self.publicPopup(".jspopup-taobao")},function(){self.publicPopup(".jspopup-taobao"),layer.closeAll("loading")})},swiperContent:function(){new Swiper(".content-swiper",{prevButton:".swiper-button-prev1",nextButton:".swiper-button-next1",slidesPerView:6,paginationClickable:!0,observer:!0,autoplayDisableOnInteraction:!1,spaceBetween:9})},ajaxGetVideo:function(){var self=this,videolink="https://h5api.m.taobao.com/h5/mtop.taobao.detail.getdetail/6.0/?jsv=2.4.8&appKey=12574478&t=1554712612690&sign=59ff83eeadc620f65b072a198f4cf178&api=mtop.taobao.detail.getdetail&v=6.0&dataType=jsonp&ttid=2017%40taobao_h5_6.6.0&AntiCreep=true&type=jsonp&data=%7B%22itemNumId%22%3A%22"+self.oItemData.itemId+"%22%7D";layer.load(2,{shade:.1}),vmAjaxGetJsonp(videolink,{},function(data){layer.closeAll("loading");var arr=[],arr_theVideos=[];if(data.data.apiStack){for(var apiStack=data.data.apiStack,i=apiStack.length;i--;){if(!(arr_theVideos=JSON.parse(apiStack[i].value).item.videos))return layer.msg("没有商品视频哦!"),void(self.oItemData.videoHide=!1);for(var l=arr_theVideos.length;l--;)arr.unshift(arr_theVideos[l])}if(arr.length<=0)return layer.msg("没有商品视频哦!"),void(self.oItemData.videoHide=!1);self.$nextTick(function(){for(var kk=0;kk<arr.length;kk++)self.oItemData.videoLink=arr[0].url,self.oItemData.videoImg=arr[0].videoThumbnailURL})}else layer.alert("点击立即跳转到淘宝去拉动滑动条或登录才能获取到实拍视频哦",{icon:2,btn:"立即跳转"},function(index){pageAll(data.data.url),layer.close(index)})},function(){layer.closeAll("loading")})},loginFun:function(){var url=encodeURIComponent(encodeURIComponent(window.location.href)),strurl=this.oCommon.adminLoginlink+"?returnurl="+url;layer.alert("请先登录",{icon:2,btn:"立即登录"},function(index){window.location.href=strurl})},picBtn:function(){var strurl="/tools/spic?shopUrl=https://item.taobao.com/item.htm?id="+this.oItemData.itemId;vmTestInput.vmPageAll(strurl)},tljBtn:function(){var strurl="/user/market/tlj?href=https://item.taobao.com/item.htm?id="+this.oItemData.itemId;vmTestInput.vmPageAll(strurl)},shorttitleBtn:function(item){this.oItemData.strShorttitle=item,this.oHistory.shorttitleShow=!1},descRecommendBtn:function(item){this.oItemData.strDesc=item,this.oHistory.descRecommendShow=!1},choiceBtn:function(item,index){if(0==this.oItemData.strItempicArr.length)this.oItemData.strItempicArr.push(item);else{var xIndex=this.oItemData.strItempicArr.indexOf(item);0<=xIndex?(this.oItemData.strItempicArr.splice(xIndex,1),xIndex=null):this.oItemData.strItempicArr.push(item)}},ajaxset:function(){var self=this;vmAjaxPost("/api/common/stat/get_setting_info",{},function(res){if(0==res.info.status){var setDATA=res.data.setting_data;self.oSetTemplate.contentTaoword=setDATA.content,self.oSetTemplate.contentlink=setDATA.content_qq,self.oSetTemplate.showTaowordShare=setDATA.content,self.oSetTemplate.showLinkShare=setDATA.content_qq,self.oSetTemplate.copy_taoword_share=setDATA.content,self.oSetTemplate.copy_link_share=setDATA.content_qq,self.oSetTemplate.defaultShare=setDATA.content_default,self.oSetTemplate.defaultlink=setDATA.content_qq_default,self.oSetting.pidArr=res.data.pid_data,res.data.pid_data.forEach(function(item,index){switch(item.type){case"0":self.oSetting.defaultWeChatPid=item.pid+"（微信）",self.oSetting.RelationidWeChat=item.relationid;break;case"1":self.oSetting.defaultQqPid=item.pid+"（QQ）",self.oSetting.RelationidQq=item.relationid;break;default:self.oSetting.OtherPid=item.pid+"（其它）",self.oSetting.RelationidOther=item.relationid}}),""==self.oSetting.defaultWeChatPid&&""!=self.oSetting.defaultQqPid&&(self.oSetting.defaultWeChatPid=self.oSetting.defaultQqPid,self.oSetting.RelationidWeChat=self.oSetting.RelationidQq),""==self.oSetting.defaultQqPid&&""!=self.oSetting.defaultWeChatPid&&(self.oSetting.defaultQqPid=self.oSetting.defaultWeChatPid,self.oSetting.RelationidQq=self.oSetting.RelationidWeChat),""==self.oSetting.defaultQqPid&&""==self.oSetting.defaultWeChatPid&&""!=self.oSetting.OtherPid&&(self.oSetting.defaultWeChatPid=self.oSetting.OtherPid,self.oSetting.defaultQqPid=self.oSetting.OtherPid,self.oSetting.RelationidWeChat=self.oSetting.relationid,self.oSetting.RelationidQq=self.oSetting.relationid),""==self.oSetting.defaultQqPid&&""==self.oSetting.defaultWeChatPid&&""==self.oSetting.OtherPid?self.oSetting.allPidNull=!1:self.oSetting.allPidNull=!0}else self.oSetting.allPidNull=!1},function(){})},filtersContent:function(value,sign){var content=value.replace(/\{标题\}/g,this.oItemData.strShorttitle);return content=(content=(content=(content=(content=(content=(content=(content=(content=(content=(content=(content=(content=content.replace(/\{短标题\}/g,this.oItemData.strShorttitle)).replace(/\{在售价\}/g,parseFloat(this.oItemData.itemInfo.price.price))).replace(/\{券后价\}/g,parseFloat(this.oItemData.itemInfo.price.buy_price))).replace(/\{推荐语\}/g,this.oItemData.strDesc)).replace(/\{介绍\}/g,this.oItemData.strDesc)).replace(/\{券额\}/g,parseFloat(this.oItemData.itemInfo.coupon.coupon_money))).replace(/\{图片\}/g,"")).replace(/\{淘口令\}/g,this.oSetTemplate.changechain.Token)).replace(/\{二合一\}/g,this.oSetTemplate.changechain.link)).replace(/\{二合一长链接\}/g,this.oItemData.itemInfo.click.url)).replace(/\{二合一短链接\}/g,this.oSetTemplate.changechain.link)).replace(/\{二合一淘点金短链接\}/g,this.oSetTemplate.changechain.link)).replace(/\{二合一淘口令\}/g,this.oSetTemplate.changechain.Token)},reviseWxBtn:function(sign){"wx"==sign?this.oSetTemplate.comwxqqnav[1].bool=!0:this.oSetTemplate.comwxqqnav[2].bool=!0,this.publicPopup(".jspopup-wxqq")},shutBtn:function(){this.publicClose(),this.wxqqnavReset()},wxqqnavReset:function(){this.oSetTemplate.wxqqIndex=0,this.oSetTemplate.comwxqqnav[1].bool=!1,this.oSetTemplate.comwxqqnav[2].bool=!1},popupwxqqBtn:function(number){1==number||2==number?this.oCommon.comloginState?this.oSetTemplate.wxqqIndex=number:this.loginFun():this.oSetTemplate.wxqqIndex=number},customizedAdd:function(item,sign){"wx"==sign?document.getElementById("textareaWx").focus():document.getElementById("textareaQq").focus(),this.insertAtCaret("{"+item.name+"}")},insertAtCaret:function(html){var sel,range;if(window.getSelection){if((sel=window.getSelection()).getRangeAt&&sel.rangeCount){(range=sel.getRangeAt(0)).deleteContents();var el=document.createElement("div");el.innerHTML=html;for(var node,lastNode,frag=document.createDocumentFragment();node=el.firstChild;)lastNode=frag.appendChild(node);range.insertNode(frag),lastNode&&((range=range.cloneRange()).setStartAfter(lastNode),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(html)},templateDefault:function(sign){"wx"==sign?document.getElementById("textareaWx").innerHTML=this.oSetTemplate.defaultShare:document.getElementById("textareaQq").innerHTML=this.oSetTemplate.defaultlink},saveTemplateBtn:function(number,sign){var self=this,Text="";""!=(Text="wx"==sign?document.getElementById("textareaWx").innerHTML:document.getElementById("textareaQq").innerHTML)?(layer.load(2),vmAjaxPost("/api/user/info/template/updateItem",{share_set:number,set_content:Text},function(data){layer.closeAll(),"1"==data.status?(layer.msg(data.message,{shadeClose:!0,shade:.4},function(){self.publicClose(),self.wxqqnavReset()}),self.ajaxset()):(layer.msg(data.message,{shadeClose:!0,shade:.4}),self.wxqqnavReset())},function(){layer.closeAll(),layer.msg("网络错误",{shadeClose:!0,shade:.4}),self.wxqqnavReset()})):layer.msg("模板不能为空",{shadeClose:!0,shade:.4})},templateCelarBtn:function(sign){"wx"==sign?document.getElementById("textareaWx").innerHTML="":document.getElementById("textareaQq").innerHTML=""},setPidBtn:function(item,sign){var str;switch(item.type){case"0":str=item.pid+"（微信）";break;case"1":str=item.pid+"（QQ）";break;default:str=item.pid+"（其它）"}"wx"==sign?(this.oSetting.defaultWeChatPid=str,this.oSetting.RelationidWeChat=item.relationid,this.oSetting.setShow=!1):(this.oSetting.defaultQqPid=str,this.oSetting.RelationidQq=item.relationid,this.oSetting.setQQShow=!1),this.publicClose(),layer.msg("设置成功！",{shadeClose:!0,shade:.4,time:2e3})},taobaoTokenBtn:function(number){var self=this;if(this.oCommon.comloginState)if(self.oSetting.allPidNull){var relationid,pidId;switch(number){case 0:relationid=self.oSetting.RelationidWeChat,pidId=self.oSetting.defaultWeChatPid;break;case 2:relationid=self.oSetting.RelationidQq,pidId=self.oSetting.defaultQqPid}var pid=pidId.substring(0,pidId.length-4);layer.load(2),vmAjaxPost("/api/common/goods/transform",{type:number,activity_id:self.oItemData.itemInfo.coupon.activity_id,num_iid:self.oItemData.itemId,title:self.oItemData.itemInfo.goods.title,itempic:self.oItemData.itemInfo.goods.pic_url,relationid:relationid,pid:pid},function(data){layer.closeAll(),0==data.info.status?(self.oSetTemplate.changechain.Token=data.data.goods.click.tao_token,self.oSetTemplate.changechain.link=data.data.goods.click.short_url,0==number?layer.msg("淘口令已生成",{shade:.4,time:1500},function(){}):layer.msg("链接已生成",{shade:.4,time:1500},function(){})):layer.msg(data.info.status_err,{shadeClose:!0,shade:.2})},function(){layer.closeAll(),layer.msg("网络错误，请重新检查网络！",{shadeClose:!0,shade:.4})})}else self.PidFun();else self.loginFun()},PidFun:function(){var self=this;layer.alert("未设置pid,请前往个人中心设置pid!",{icon:2,btn:"立即前往"},function(index){vmTestInput.vmPageAll(self.oCommon.adminPidlink),layer.close(index)})},friendsBtn:function(number){this.oItemData.friendsIndex+=number},ajaxSignin:function(){var self=this;vmAjaxPost("/api/common/stat/loginfo",{},function(data){1==data.data.loginState?self.oCommon.comloginState=!0:self.oCommon.comloginState=!1},function(){})},swiperrecommend:function(){new Swiper(".recommend-swiper",{prevButton:".swiper-button-prev2",nextButton:".swiper-button-next2",slidesPerView:5,paginationClickable:!0,autoplayDisableOnInteraction:!1,observer:!0,spaceBetween:14})},seeImg:function(url){layer.open({type:1,title:!1,closeBtn:0,area:"300px",shadeClose:!0,content:'<div><img src="'+url+'"></div>'})},videoPlayBtn:function(index){var self=this;self.oVideo.videooIndex=index,setTimeout(function(){var myVideo=self.$refs.myVideo[0];null!=myVideo&&(null==myVideo.error?(myVideo.play(),self.$refs.myVideo[0].addEventListener("waiting",function(){self.oVideo.videooneIcon?self.oVideo.videosetClear=setTimeout(function(){self.oVideo.videooneIcon=!1,self.oVideo.loadIcon=!0},100):self.oVideo.loadIcon=!0}),self.$refs.myVideo[0].addEventListener("playing",function(){self.oVideo.loadIcon=!1})):self.oVideo.playBool=!1,myVideo.addEventListener("play",function(){self.videoEnd(),self.oVideo.playBool=!0}))},100)},videostopBtn:function(){var self=this;this.$refs.myVideo[0].pause(),this.$refs.myVideo[0].addEventListener("pause",function(){self.oVideo.playBool=!1,self.oVideo.loadIcon=!1})},videoEnd:function(){var self=this;self.$refs.myVideo[0].addEventListener("ended",function(){self.$refs.myVideo[0].pause(),self.oVideo.playBool=!1})},videoExtendBtn:function(){this.oDyvideo.videoExtend=!1},videomoveinIcon:function(name,event){layer.tips(name,$(event.target),{time:0,tips:[1,"#553cf7"]})}}};Vue.component("component-detailsjb",{mixins:[vmminxShopData],data:function(){return{oPublic:{reportImg:""},oVideo:{playBool:!1,videooIndex:0,pLink:" 0",oVoice:!0,videoData:[],oTime:0,videoitemId:"",IndexSave:"",loadIcon:!1,videosetClear:"",videooneIcon:!1},oVideoreport:{videohideJb:!1,videoItemId:"",itemId:"",reportLSelected:1e3,reportL:"",reportQQ:""},oVideoReportSelected:[{id:1,describe:"违法违规"},{id:2,describe:"盗用视频"},{id:3,describe:"商品信息有误"},{id:0,describe:"其它"}],oToken:{token:"",toeknTime:"",toeknBoolean:!1}}},methods:{videoReport:function(item){this.publicPopup(".js-PopupVideoReport"),this.oVideoreport.videohideJb=!0,this.oVideoreport.videoitemId=item.id,this.oVideoreport.itemId=item.itemid,this.ajaxGetToken()},videoReportBtn:function(){var self=this;1e3!=self.oVideoreport.reportLSelected?""!=self.oVideoreport.reportL?""!=self.oVideoreport.reportQQ?vmAjaxPost("/trill/trill_report",{trill_id:self.oVideoreport.videoitemId,itemid:self.oVideoreport.itemId,report_type:self.oVideoreport.reportLSelected,report_reason:self.oVideoreport.reportL,report_qq:self.oVideoreport.reportQQ,report_image:self.oPublic.reportImg,report_source:1},function(data){"200"==data.status?(self.videojbPrdoucShut(),layer.msg(data.message,{icon:1,time:2e3})):layer.msg(data.message,{icon:2,time:2e3})},function(){}):layer.msg("请输入您的联系QQ",{time:1500,shade:[.1,"#fff"],shadeClose:!0}):layer.msg("请先填写举报理由",{time:1500,shade:[.1,"#fff"],shadeClose:!0}):layer.msg("请先选择理由",{time:1500,shade:[.1,"#fff"],shadeClose:!0})},videogetCouponSelected:function(item){this.oVideoreport.reportLSelected=item.id},videojbPrdoucShut:function(){this.oVideoreport.videohideJb=!1,this.publicClose(),this.oVideoreport.videoItemId="",this.oVideoreport.reportLSelected=1e3,this.oVideoreport.reportL="",this.oVideoreport.reportQQ="",this.oPublic.reportImg=""}},template:'<div class="inJu-wrap details-jbwrap  comPopupHide js-PopupVideoReport" ><div class="in-modal-inner" v-if="oVideoreport.videohideJb"><p class="in-modal-hd">举报视频</p><p class="in-modal-p">请选择并填写举报理由，我们会对视频进行相应处理</p><ul class="in-modal-list"><li><span>选择理由</span><div class="modal-detail"><i v-for="item in oVideoReportSelected" :class= "oVideoreport.reportLSelected == item.id?\'active\':\'\'"@click="videogetCouponSelected(item)" > {{ item.describe }}</i ></div ></li ><li><span>举报理由</span><input type="text" maxlength="20" v-model="oVideoreport.reportL" placeholder="请写下举报视频的理由"></li><li><span>联系Q号</span><input type="text" v-model="oVideoreport.reportQQ" maxlength="12" onkeyup="this.value=this.value.replace(/[^0-9]/g,\'\')" placeholder="请输入您的联系QQ"></li></ul><div class="in-modal-up"><span>上传截图</span><div class="in-modal-img" v-if="oPublic.reportImg" @click="seeImg(oPublic.reportImg)"><img :src="oPublic.reportImg"></div><div class="in-modal-upbox"><em>+</em><input type="file" @change="ReportreadFile($event)"></div></div><div class="in-modal-footer"><span class="in-modal-btn comHover-color"  @click="videoReportBtn()">提交</span><span class="in-modal-btn comHover-color"  @click="videojbPrdoucShut()" > 取消</span ></div></div></div>'}),Vue.component("newvmPic",{props:["goodsid"],data:function(){return{loadmsg:!0,cacheId:"",realPicoPage:{pageNumber:1,pageImgAll:[]},realChoiceImg:[]}},mounted:function(){var self=this,nScrollHight=0,nScrollTop=0,nDivHight=$(".realpic-box").height();$(".realpic-box").scroll(function(){nScrollHight=$(this)[0].scrollHeight,nScrollTop=$(this)[0].scrollTop,nScrollHight<=nScrollTop+nDivHight&&self.loadmsg&&self.ajaxIrealpic()})},methods:{ajaxIrealpic:function(abs){var self=this;if(abs){if(self.cacheId==self.goodsid&&""!=self.realPicoPage.pageImgAll)return void self.CallbackRealpic();self.realPicoPage={pageNumber:1,pageImgAll:[]},self.loadmsg=!0,layer.load(2,{shade:.1}),self.cacheId=self.goodsid}else self.realPicoPage.pageNumber+=1;vmAjaxPost("/tool/get_evaluate_imageurl",{itemid:self.goodsid,page:self.realPicoPage.pageNumber},function(data){if(layer.closeAll("loading"),"200"==data.code){if(0==data.evaluate_imageurl)return self.loadmsg=!1,void(abs&&layer.msg("没有实拍图哦",{time:1500,shade:.1,shadeClose:!0}));self.realPicoPage.pageImgAll=self.realPicoPage.pageImgAll.concat(data.evaluate_imageurl),self.realPicoPage.pageImgAll.length<6&&self.ajaxIrealpic(),self.$nextTick(function(){abs&&self.CallbackRealpic()})}else"-1"==data.code?layer.msg("请先登录",{time:1500,shade:.1,shadeClose:!0}):layer.msg(data.msg,{icon:2,shade:.1,shadeClose:!0})})},realchoiceBtn:function(item){var xIndex;this.realChoiceImg.length<9?0==this.realChoiceImg.length?this.realChoiceImg.push(item):0<=(xIndex=this.realChoiceImg.indexOf(item))?(this.realChoiceImg.splice(xIndex,1),xIndex=null):this.realChoiceImg.push(item):(0<=(xIndex=this.realChoiceImg.indexOf(item))&&(this.realChoiceImg.splice(xIndex,1),xIndex=null),9<=this.realChoiceImg.length&&layer.msg("最多只能选择9张哦",{time:1500,shade:.1,shadeClose:!0}))},realdetermine:function(){layer.closeAll()},CallbackRealpic:function(){layer.open({type:1,title:!1,closeBtn:2,shade:.4,content:$(".js-realPic")})}},template:'<div class="realPic js-realPic realpic-new"><div class="realPic-head clearfix"><p>获取实拍图</p><a href="javascript:" class="iconfont hdk-close layui-layer-close layui-layer-close1"></a></div><div class="realpic-box"><ul class="realPic-list clearfix"><li v-for="(item,index) in realPicoPage.pageImgAll" :class="realChoiceImg[realChoiceImg.indexOf(item)] == item?\'active\':\'\'"  @click="realchoiceBtn(item,index)"><img :src="item+\'_600x600.jpg\'"><div class="realpic-choice"><i></i></div></li></ul><p class="realpic-loading" v-if="loadmsg"> <i class="iconfont hdk-jiazai vmIconLoad"></i><em>数据加载中...</em></p><p class="realpic-loading" v-else>数据已经加载完了</p></div><div class="realpic-btn"><span :class="realChoiceImg !=\'\'?\'\':\'active\'" @click="realChoiceImg = []">取消选中</span><span :class="realChoiceImg !=\'\'?\'\':\'active\'" @click="realdetermine()">确定<i>(已选择{{realChoiceImg.length}}/9)</i></span></div></div>'});