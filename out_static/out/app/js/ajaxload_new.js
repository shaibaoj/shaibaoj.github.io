!function(t){window.RESOURCE_URL="dist/js/third-party/ueditor/third-party/dingdone/images/",t.globalAjaxLoadImg=!0,t.globalAjaxLoad=function(){function i(t){this.mask=null,this.dom=t,this.status=0}return t.extend(i.prototype,{loading:'<img src="'+RESOURCE_URL+'loading.gif" style="width:30px;"/>',create:function(i){this.mask||(this.mask=t("<div/>").css({position:"absolute",background:"rgba(0, 0, 0, .1)"}).appendTo("body"),t(this.loading).appendTo(this.mask).css({position:"absolute",left:"50%",top:"50%",margin:"-15px 0 0 -15px"}));var o={width:i.width+"px",height:i.height+"px",left:(i.left||0)+"px",top:(i.top||0)+"px","z-index":i["z-index"]>1e5?i["z-index"]:1e5,display:"inline-block",position:i["is-window"]||i["is-fixed"]?"fixed":"absolute"};this.mask.css(o)},start:function(){if(t.globalAjaxLoadImg&&this.dom){this.status=1;var i=t.isWindow(this.dom),o=t(this.dom);if(!o.is(":hidden")){var n={};if(t.extend(n,o.offset()),n.width=o.outerWidth(),n.height=o.outerHeight(),n["z-index"]=i?1e5:parseInt(o.css("z-index")),n["is-window"]=i,n["is-fixed"]=!1,o.parents().each(function(){if("fixed"==t(this).css("position"))return n["is-fixed"]=!0,n["z-index"]=parseInt(t(this).css("z-index"))+1,!1}),n["is-fixed"]){var s=t(document);n.top-=s.scrollTop(),n.left-=s.scrollLeft()}this.create(n)}}},stop:function(){this.dom&&this.destroy()},destroy:function(){this.dom=null,this.mask&&this.mask.remove(),this.mask=null}}),{cache:{},guid:0,start:function(){t.each(this.cache,function(t,i){0==i.status&&i.start()})},stop:function(t){this.cache[t]&&this.cache[t].stop()},bind:function(t){var o=++this.guid;return this.cache[o]=new i(t),o},unbind:function(t){this.cache[t]&&this.cache[t].destroy(),delete this.cache[t]},loadImg:function(){return i.prototype.loading}}}(),t.globalLoad=function(i){var o=t.globalAjaxLoad,n=o.bind(i);return o.start(),function(){o.stop(n)}},t.globalAjax=function(i,o,n){var s=t.globalAjaxLoad.bind(i),a=o();return a.guid=s,n&&"function"==t.type(n)&&t.when(a).then(n),a},t(function(){t(document).on({ajaxStart:function(i){t.globalAjaxLoad.start()},ajaxComplete:function(i,o,n){o.guid&&t.globalAjaxLoad.stop(o.guid)},ajaxError:function(i,o,n){o.guid&&t.globalAjaxLoad.stop(o.guid)}})})}(jQuery);
