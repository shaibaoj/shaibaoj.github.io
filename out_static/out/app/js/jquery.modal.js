!function(t){var o='<div class="modal fade" id="dingdone-tipModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog modal-confirm"></div></div>',i='<div class="modal-content confirm-dialog"><div class="modal-header ${$item.className}">{{if value}}<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>{{/if}}{{= title}}</div><div class="modal-body"><p>{{= message}}</p>{{if value}}<input type="text" class="form-control" id="popup_prompt" />{{/if}}</div><div class="modal-footer">{{if !customBtns}}{{if $item.cancel}}<button class="btn wd80 btn-default" data-dismiss="modal" id="pop_cancel">取消</button>{{/if}}<button class="btn wd80 btn-danger" data-dismiss="modal" id="pop_ok">确定</button>{{else}}{{each customBtns}}<a class="btn wd150 custombtn {{if $value.btnClass}}{{= $value.btnClass}}{{/if}}" {{if $value.dismiss}}data-dismiss="modal"{{/if}} {{if $value.href}}href="{{= $value.href}}"{{/if}} target="_blank">{{= $value.name}}</a>{{/each}}{{/if}}</div></div>';t.modal={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,alert:function(o,i,n){t.modal._batch(i,o,null,"alert",function(t){n&&n(t)})},confirm:function(o,i,n,a){t.modal._batch(i,o,null,"confirm",function(t){n&&n(t)},a)},prompt:function(o,i,n,a){t.modal._batch(n,o,i,"prompt",function(t){a&&a(t)})},_batch:function(o,i,n,a,e,l){var d=a.substring(0,1).toUpperCase()+a.substring(1),s={};s.title=o||d,s.message=i,s.type=a,s.value=n||null,s.customBtns=l||null,s.callback=e,t.modal._show(s)},_show:function(n){var a={},e=t("#dingdone-tipModal");e.length?e.find(".modal-content").remove():e=t(o).appendTo("body");var l="fixed";switch(t("#dingdone-tipModal").css({position:l,zIndex:99999,padding:0,margin:0}),t.modal._reposition(),t.modal._maintainPosition(!0),n.type){case"alert":a.cancel=!1;break;case"confirm":a.cancel=!0;break;case"prompt":a.cancel=!1}var d=n.title.match(/删除|审核|打回/);d=d&&d[0]||"",a.className="alert-tip",n.title=n.title||"提示",t.tmpl(i,n,a).appendTo(e.find(".modal-dialog")),t.modal.setEvent(n),console.log(t("#dingdone-tipModal"),t.fn.modal),t("#dingdone-tipModal").modal("show")},setEvent:function(o){var i=t("#pop_ok");i.length&&i.click(function(){o.callback&&o.callback(!0,i)}),o.customBtns&&t(".custombtn").click(function(){t("#dingdone-tipModal").modal("hide")})},_reposition:function(){var o=t(window).height()/2-t("#dingdone-tipModal").outerHeight()/2+t.modal.verticalOffset,i=t(window).width()/2-t("#dingdone-tipModal").outerWidth()/2+t.modal.horizontalOffset;o<0&&(o=0),i<0&&(i=0),t("#dingdone-tipModal").css({top:o+"px",left:i+"px"})},_maintainPosition:function(o){if(t.modal.repositionOnResize)switch(o){case!0:t(window).bind("resize",t.modal._reposition);break;case!1:t(window).unbind("resize",t.modal._reposition)}}},jAlert=function(o,i,n){return t.modal.alert(o,i,n),jAlert},jConfirm=function(o,i,n,a){return t.modal.confirm(o,i,n,a),jConfirm},jPrompt=function(o,i,n,a){return t.modal.prompt(o,i,n,a),jPrompt};var n=function(o){if("string"!=typeof o){o=t(o);var i=o.offset(),n=o.outerHeight(),a=(o.outerWidth(),t("#dingdone-tipModal")),e=a.outerHeight(),l=a.outerWidth(),d=t(window),s=d.height(),r=d.width(),c=i.left,m=i.top+n+10;i.left+l>r&&(c=i.left-l),c<0&&(c=0),i.top+n+e>s&&(m=i.top-e-10),m<0&&(m=0),a.css({left:c+"px",top:m+"px",position:"absolute"})}};jAlert.position=jConfirm.position=jPrompt.position=n,window.jConfirm=jConfirm,window.jAlert=jAlert,window.jPrompt=jPrompt}(jQuery);
