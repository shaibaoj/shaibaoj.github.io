"use strict";define(function(require){var app=require("app");require("../auth/medium_auth"),app.factory("mediumServ",function(http,config,$q,$modal){var service={},openAuthModal=function(days){$modal.open({animateanimation:!0,size:720,templateUrl:"common/modal/medium_auth.html",controller:"MediumAuthModalCtrl",resolve:{modalData:{days:days}}})},isshow=localStorage.getItem("isshow")?localStorage.getItem("isshow"):"isshow";return localStorage.setItem("isshow",isshow),angular.extend(service,{getChannelList:function(vod,audio){var deferred=$q.defer(),url=config.getAPI("contentlist");return http(url,{params:vod}).then(function(resp){var data=resp.data;http(url,{params:audio}).then(function(res){var _data=data.concat(res.data);deferred.resolve(_data)})["catch"](function(reject){deferred.reject(reject)})})["catch"](function(reject){deferred.reject(reject)}),deferred.promise},checkAuthModal:function(){var url=config.getAPI("getbusiness"),days=0;http(url).then(function(data){days=data.length<=0?0:data.result.overdue_time,"isshow"==localStorage.getItem("isshow")&&openAuthModal(days)})}}),service})});