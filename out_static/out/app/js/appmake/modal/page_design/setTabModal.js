"use strict";define(function(require){require("../../page_design/services/page_design_service");var app=require("app");app.controller("SetTabModalCtrl",["$rootScope","$scope","modalData","PageDesignService","http","config","$mdDialog",function($rootScope,$scope,modalData,PageDesignService,http,config,$mdDialog){var vm=$scope.vm={};angular.extend(vm,{init:function(){var _this=this;this.VIEWS=modalData.VIEWS,this.root_view_id=modalData.root_view_id,this.pageId=modalData.pageId,this.tab_items=this.VIEWS[this.root_view_id].tab_items,this.getChildPageList(),PageDesignService.getFormScheme("tabbar_item").then(function(json){vm.formScheme=json,vm.attrValues=_this.VIEWS[_this.tab_items[0]]})},getChildPageList:function(){var url=config.getAPI("pageManage.portfoliopagedetail").replace("{id}",$rootScope.pageId);http(url).then(function(json){vm.childList=json.result.nav_items,vm.current=vm.childList[0]})},select:function(child,index){var _this2=this;vm.current=child,PageDesignService.getFormScheme("tabbar_item").then(function(json){vm.formScheme=json,vm.attrValues=_this2.VIEWS[_this2.tab_items[index]]})},save:function(){$mdDialog.hide({VIEWS:this.VIEWS})},cancel:function(){$mdDialog.cancel()}}),vm.init()}])});