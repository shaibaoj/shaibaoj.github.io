"use strict";define(function(require){var app=require("app"),server=require("common/services/server");require("common/modal/modal-header"),require("common/modal/modal-footer"),app.controller("ModalSysConfig",["$scope","http","config","utils",function($scope,http,config,utils){var vm=$scope.vm={};angular.extend(vm,{init:function(){vm.loading="init",vm.getSeytemData()},getSeytemData:function(){var url=config.getAPI("appglobaldesign.getsystemconfig");http(url,{method:"get"}).then(function(resp){resp.error_code||(vm.list=resp.result,vm.initView())})},initView:function(){var listRow1={},listRow2={},listRow3={};vm.listRow=[],"normal"==server.version&&delete vm.list.is_has_purchase,vm.rowFirst={},vm.secondFirst={},vm.thirdFirst={},angular.forEach(vm.list,function(val,index){vm[index]=!!val.is_select});var index=0;A.forEach(A.copy(vm.list),function(value,key){index++,index<=3?listRow1[key]=value:3<index&&index<=6?listRow2[key]=value:6<index&&index<=9&&(listRow3[key]=value),vm[key]=value.value}),vm.listRow.push(listRow1),vm.listRow.push(listRow2),vm.listRow.push(listRow3),console.log(vm.listRow,"vm.listRow")},setView:function(){var obj={};return angular.forEach(vm.list,function(val,index){obj[index]=Number(vm[index])}),obj},check:function(key){vm[key]=!vm[key]},save:function(){var obj=vm.setView(),url=config.getAPI("appglobaldesign.setsystemconfig");vm.loading=!1,http(url,{method:"post",data:obj}).then(function(resp){utils.success("系统功能模块设置成功"),vm.loading="complete",setTimeout(function(){$scope.$parent.$parent.vm.save()},1500)})}}),vm.init()}])});