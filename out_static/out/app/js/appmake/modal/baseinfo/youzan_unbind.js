"use strict";define(function(require){var app=require("app");require("../../services/appMakeService"),app.controller("youzanUnbindModalCtrl",["$scope","utils","http","appMakeService","userService","$modalInstance",function($scope,utils,http,appMakeService,userService,$modalInstance){var vm=$scope.vm={};angular.extend(vm,{init:function(){vm.loading="init",vm.getAppInfo()},getAppInfo:function(){appMakeService.getAppList().then(function(resp){resp.error_code||(vm.guid=resp.result.applications[0].guid)})},youzanUnbind:function(){vm.loading=!1;var url=userService.getAPI("youzanunbind").replace("{app_id}",vm.guid);http(url,{method:"delete"}).then(function(resp){"0"===resp.error_code&&(utils.success("授权解除成功！"),setTimeout(function(){$modalInstance.close()},1500),vm.loading="complete")})["catch"](function(reject){vm.loading="complete"})},close:function(){$modalInstance.close()}}),vm.init()}])});