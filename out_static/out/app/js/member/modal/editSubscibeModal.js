"use strict";define(function(require){var app=require("app");require("common/services/modelService"),require("common/modal/modal-header"),require("common/modal/modal-footer"),app.controller("EditSubscibe",["$scope","$mdDialog","modelService","config","http","data","utils",function($scope,$mdDialog,modelService,config,http,data,utils){var vm=$scope.vm={};angular.extend(vm,{param:{type:"associate"},init:function(){vm.subinfo=data,vm.getModel()},getModel:function(){var model=modelService.fetchModelList().$$state;model.value&&angular.forEach(model.value,function(vv){vv.slug==vm.subinfo.associate_model&&(vm.subinfo.modelName=vv.name)})},save:function(){var errMsg;if(vm.subinfo.name||(errMsg="组名称不能为空"),errMsg)return utils.error(errMsg),!1;var url=config.getAdminAPI("editgroups").replace("{id}",vm.subinfo.id);http(url,{method:"put",data:vm.subinfo}).then(function(data){data&&0==data.error_code&&utils.success("修改成功").then(function(){$mdDialog.hide(data)})})},close:function(){cosnole.log("11"),$mdDialog.cancel()}}),vm.init()}])});
