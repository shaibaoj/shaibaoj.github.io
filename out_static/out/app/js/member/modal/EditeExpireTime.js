"use strict";define(function(require){var app=require("app");require("common/services/modelService"),require("common/modal/modal-header"),require("common/modal/modal-footer"),app.controller("EditeExpireTime",["$scope","$mdDialog","config","http","utils",function($scope,$mdDialog,config,http,utils){var vm=$scope.vm={};angular.extend(vm,{init:function(){this.initParams()},initParams:function(){vm.datelimit="天",vm.datetype="day",vm.selected="period",vm.newdate="",vm.expire_date="",vm.checked=!1,vm.days="",vm.date="",vm.dateList=[{slug:"day",name:"天"},{slug:"mouth",name:"月"},{slug:"year",name:"年"}]},dateSelect:function(val){vm.datelimit=val.name,vm.datetype=val.slug},check:function(){vm.checked=!vm.checked,vm.date="",vm.expire_date=""},choose:function(cycle){vm.expire_date="",vm.selected=cycle},close:function(){$mdDialog.cancel()},save:function(item){vm.expire_date=vm.newdate.substr(0,10),vm.date="";var params={is_perpetual:!0};vm.checked===!0?(params.is_perpetual=!0,params.days=void 0,params.expire_date=void 0):(params.is_perpetual=!1,"period"===vm.selected?(params.expire_date=void 0,"day"===vm.datetype?params.days=vm.days:"mouth"===vm.datetype?params.days=30*vm.days:"year"===vm.datetype&&(params.days=365*vm.days)):"times"===vm.selected&&(params.days=void 0,params.expire_date=vm.newdate.substr(0,10)+"T"+vm.newdate.substr(11,16)+"Z")),console.log("有效期params: "+JSON.stringify(params)),$mdDialog.hide(params)}}),vm.init()}])});
