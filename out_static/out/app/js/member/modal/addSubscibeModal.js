"use strict";define(function(require){var app=require("app");require("common/services/modelService"),require("common/modal/modal-header"),require("common/modal/modal-footer"),app.controller("CreateSubscibe",["$scope","$mdDialog","modelService","config","http","utils",function($scope,$mdDialog,modelService,config,http,utils){var vm=$scope.vm={};angular.extend(vm,{param:{type:"associate"},init:function(){vm.getModel()},getModel:function(){modelService.fetchModelList().then(function(res){console.log("关联数据表数据: ",res),vm.modelList=res})},select:function(val){vm.limit=val.name,vm.param.associate_model=val.slug},save:function(){var errMsg="";if(vm.param.associate_model||(errMsg="组关联数据不能为空"),vm.param.name||(errMsg="组名称不能为空"),errMsg)return utils.error(errMsg),!1;var url=config.getAdminAPI("creategroup");http(url,{method:"post",data:vm.param}).then(function(data){data&&0==data.error_code&&utils.success("新建成功").then(function(){$mdDialog.hide(data)})})},close:function(){$mdDialog.cancel()}}),vm.init()}])});
