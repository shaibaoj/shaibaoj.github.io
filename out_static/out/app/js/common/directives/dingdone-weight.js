"use strict";define(function(require){var app=require("app");app.directive("modelWeight",function(){return{scope:{weight:"=",max:"=",min:"=",step:"="},restrict:"E",template:'<div class="dingdone-weight-model"><div class="weight-value"><input type="text" name="weight" dingdone-integer min="min || 0" max="max || 100" ng-model="weight" ></input><span class="arrow" ng-click="toggleSlider()"></span></div><div class="weight-slider sys-flex sys-flex-center" ng-class="{active: show}"><span class="minus" ng-click="minus()"></span><div class="dingdone-slider sys-flex-one"></div><span class="plus" ng-click="plus()"></span></div></div>',replace:!0,link:function(scope,element,attrs,controller){var slider=element.find(".dingdone-slider");scope.show=!1,scope.weight=scope.weight?scope.weight:0;var sliderTo=function(){slider.slider({value:parseInt(scope.weight),slide:function(event,ui){scope.$apply(function(){scope.weight=ui.value})},max:parseInt(scope.max||100),min:parseInt(scope.min||0),step:parseInt(scope.step||1)})};scope.toggleSlider=function(){scope.show=!scope.show,scope.show&&sliderTo()},scope.minus=function(){scope.min<scope.weight&&(scope.weight--,sliderTo())},scope.plus=function(){scope.max>scope.weight&&(scope.weight++,sliderTo())}}}}),app.directive("dingdoneInteger",function(){return{scope:{max:"=",min:"="},require:"ngModel",restrict:"A",link:function(scope,element,attrs,ngmodel){var oldValue=scope.weight;element.on("keydown",function($event){$event.which>=48&&$event.which<=57||8===$event.which?oldValue=parseInt(element.val())||0:$event.preventDefault()}),element.on("keyup",function($event){var val;val=$event.which>=48&&$event.which<=57||8===$event.which?parseInt(element.val()):oldValue;var max=parseInt(scope.max),min=parseInt(scope.min);val=val>max?max:val,val=val<min?min:val,element.val(val||0),scope.weight=val||0,oldValue=val})}}})});
