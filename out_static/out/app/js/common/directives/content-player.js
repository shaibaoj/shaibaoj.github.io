"use strict";define(function(require){var app=require("app");app.directive("contentPlayer",function(){return{scope:{playerData:"="},restrict:"E",templateUrl:"common/directives/content-player.html",replace:!0,controller:"ContentPlayer"}}),app.controller("ContentPlayer",["$scope","utils","upload","config",function($scope,utils,_upload,config){var vm=$scope.vm={};angular.extend(vm,{init:function(){$scope.playerData=$scope.playerData?$scope.playerData:{},$scope.playerData.imgObj?$scope.playerData.imgObj.url=utils.getImgUrl($scope.playerData.imgObj):$scope.playerData.imgObj={},vm.loading="init"},upload:function(file){vm.loading=null;var url=config.getAPI("upload");_upload(url,file,190,160).then(function(data){vm.loading="complete",$scope.playerData.imgObj=data,console.log(data,123)},function(reason){vm.loading="complete",utils.error("该图片上传失败!")})}}),vm.init()}])});
