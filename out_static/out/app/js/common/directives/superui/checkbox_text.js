"use strict";define(function(require){var app=require("app");app.directive("dingdoneWidgetCheckboxText",function($compile){return{scope:{widget:"="},replace:!0,templateUrl:"common/directives/superui/checkbox_text.html",require:"?^dingdoneWidgetItem",link:function($scope,el,attrs,dingdoneWidgetItem){var vm=$scope.vm={};angular.extend(vm,{selected:[],init:function(){var options_values=[];A.forEach($scope.widget.options,function(item){options_values.push(item.value)}),A.forEach(dingdoneWidgetItem.getValue(),function(option){options_values.indexOf(option)>-1&&vm.toggle(option)})},toggle:function(item){var idx=vm.selected.indexOf(item);idx>-1?vm.selected.splice(idx,1):vm.selected.push(item)},exists:function(item){return vm.selected.indexOf(item)>-1}}),vm.init(),$scope.$watch("vm.selected",function(newVal,oldVal){"undefined"==typeof newVal||angular.equals(newVal,oldVal)||dingdoneWidgetItem.setValue(newVal,null,!0)},!0)}}})});