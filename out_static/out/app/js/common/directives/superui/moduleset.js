"use strict";define(function(require){var app=require("app");app.directive("dingdoneWidgetModuleset",function(utils,config,http,PageDesignService,$compile,$q){return{scope:{widget:"="},replace:!0,templateUrl:"common/directives/superui/moduleset.html",link:function($scope,el,attrs){var vm=$scope.vm={};angular.extend(vm,{moduleId:$scope.widget.moduleId,init:function(){vm.isShow=!1,vm.showName="",vm.selected=[],vm.getModalBind(),$scope.widget.selects=vm.selected},getModalBind:function(){var url=config.getAPI("pageManage.getModalBind"),params={module_id:vm.moduleId};http(url,{method:"get",params:params}).then(function(resp){var modalIds=resp.result.bind_section_id;vm.getModalList(modalIds)})},getModalList:function(modalIds){var url=config.getAPI("pageManage.getModalList");http(url).then(function(resp){vm.modalList=resp.result.sections,A.forEach(modalIds,function(modalId){A.forEach(vm.modalList,function(list){modalId==list.id&&vm.selected.push(list)})}),vm.showNameFun(vm.selected)})},show:function(){vm.isShow=!vm.isShow},selectName:function(section,list){var idx=list.indexOf(section);idx>-1?list.splice(idx,1):list.push(section),vm.showNameFun(list)},showNameFun:function(lists){vm.showName="",A.forEach(lists,function(list){vm.showName+=","+list.name}),vm.showName=vm.showName.substring(1,vm.showName.length)},exist:function(section,list){return list.indexOf(section)>-1}}),vm.init()}}})});