"use strict";define(function(require){var app=require("app");app.factory("userService",["$rootScope","$q","config","http",function($rootScope,$q,config,http){return{getAPI:function(key,APIHost){var APIHost=APIHost||"API_admin";return config.getAPI(key,"release",APIHost)},getUser:function(){var deferred=$q.defer(),promise=deferred.promise,url=this.getAPI("getusermessage");return console.log($rootScope.userinfo,"缓存信息"),$rootScope.userinfo?deferred.resolve($rootScope.userinfo):http(url).then(function(json){$rootScope.userinfo=json,deferred.resolve(json)}),promise}}}])});