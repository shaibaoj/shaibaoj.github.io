"use strict";define(function(require){var app=require("app"),server=require("common/services/server");require("appmake/modal/preview_helper"),require("common/services/helpPageService"),app.controller("UserheadCtrl",["$rootScope","$scope","$state","$mdDialog","$timeout","navconfig","utils","helpPageService",function($rootScope,$scope,$state,$mdDialog,$timeout,navconfig,utils,helpPageService){console.log("$rootScope.create_model_table",$rootScope.create_model_table);var vm=$scope.vm={};vm.version=server.version,vm.breadcrumb=navconfig.breadcrumb,vm.navmenus=navconfig.navmenus,vm.oldmode="",angular.extend(vm,{operateWidth:60,designWidth:180,hover:function(bool){vm.showmenu=bool,$rootScope.$broadcast("show_sumarg_thumb",bool)},close:function(){vm.showmenu=!1},modeButtonOver:function(){vm.close(),vm.changebuttontext=!0},modeButtonOut:function(){vm.changebuttontext=!1},changeCurrentType:function(isoperate){vm.changebuttontext=!1,isoperate?($state.go("mainLayout.index"),vm.navWidth=vm.designWidth):($state.go("mainLayout.operateindex"),vm.navWidth=vm.operateWidth),helpPageService.navWidth=vm.navWidth},addNavHeaderStyle:function(){vm.oldmode!==vm.isoperate&&($(".nav-top-wrap").removeClass("operate_layout"),$(".nav-top-wrap").removeClass("design_layout"),vm.isoperate?$timeout(function(){$(".nav-top-wrap").addClass("operate_layout")},1e3):$timeout(function(){$(".nav-top-wrap").addClass("design_layout")},1e3),vm.oldmode=vm.isoperate)},previewHelper:function(){console.log("预览助手"),$mdDialog.show({controller:"ModalPreviewHelper",templateUrl:"appmake/modal/preview_helper.html",clickOutsideToClose:!0,openFrom:"#preview",closeTo:"#preview"})},back:function(){null!=$rootScope.create_model_table?($rootScope.create_model_table=null,$state.go("mainLayout.contentmodel")):$state.go("mainLayout.contentlist",{model_id:$rootScope.modelId})}}),$scope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){console.log("-------路由成功后--------"),vm.breadcrumbarr=utils.dealBreadcrumb(vm.navmenus,vm.breadcrumb),"mainLayout.operateindex"==$state.current.name?vm.isoperate=!0:vm.isoperate=!1,console.log("$state",$state),console.log("vm.isoperate",vm.isoperate)}),$rootScope.$on("hide_sumarg_thumb",function(event,info){vm.close()}),$rootScope.$on("selectcurrentmode",function(event,$modelinfo){vm.breadcrumbarr=utils.dealBreadcrumb(vm.navmenus,vm.breadcrumb),console.log("init 后触发事件 ！！！！！！"),vm.isoperate="operate"==$modelinfo,helpPageService.navWidth=vm.isoperate?vm.operateWidth:vm.designWidth,$rootScope.navbarWidth=vm.isoperate?vm.operateWidth:vm.designWidth,vm.addNavHeaderStyle(),["mainLayout.index","mainLayout.operateindex","mainLayout.mxucommunity"].indexOf($state.current.name)!=-1?$rootScope.changeContentPadding=!0:$rootScope.changeContentPadding=!1})}])});